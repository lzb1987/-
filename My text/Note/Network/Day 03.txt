Day 03 网络层

1.网络层的功能
  · 定义了基于IP协议的逻辑地址
  · 连接不同的媒介类型
  · 选择数据通过网络的最佳路径

2.路由概述
  · 将数据包从一个网络发送到另一个网络
    - 需要依靠路由器完成
    - 路由器只关心网络的状态,决定最佳路径

3.路由器工作:
    -识别数据包的目标IP地址
    -识别数据包的源IP地址(用于策略路由)
    -在路由表中发现可能的路径
    -在路由表中选择到达目标最好的路径
    -维护和检查路由信息
  · 根据路由表选择最佳路径
    -每个路由器都维护一张路由表,这是路由器转发数据包的关键
    -每条路由表记录指明了:到达某个子网或主机应从路由器的那个物理端口发送,通过此端口可达到该路径的下一个路由器的地址
4.如何获得路由表
  · 静态,缺省路由
    -由管理员在路由器上手动指定
    -适合分支机构,家居办公等小型网络
  · 动态路由
    -根据网络拓扑或流量变化,由路由器通过路由协议自动设置
    -适合ISP服务商,广域网,园区网等大型网络

5.静态路由
  · 主要特点
    -由管理员手动配置,为单向条目
    -通信双方的边缘路由器都需要指定,否则会导致数据包有去无回
  · 配置静态路由
    ()#in g0/0
    //设置接口ip
    ()#ip address 192.168.1.254 255.255.255.0
    //启用接口
    ()#no shutdown
  · 查看路由表
    #show ip route
    C直连路由
    S静态路由
    S*默认路由

  · 删除接口ip
    ()#no ip address
  · 配置静态路由
    ()#ip route 目标网络ID 子网掩码 下一跳

6.缺省路由
  · 什么是缺省路由
    -缺省路由是一种特殊的静态路由,对于末梢网络的主机来说,也被称为"默认网关",一般缺省路由也只应用在末梢网络,中继网络使用缺省路由会导致丢包
    -缺省路由的.目标网络为0.0.0.0 0.0.0.0 ,可匹配任何目标地址
    -只有当从路由表中找不到任何明确匹配的路由条目时,才会使用缺省路由

7.三层交换机
  ·概述:
    · 使用三层交换技术实现VLAN间通信
    · 三层交换=二层交换+三层转发
  ·虚接口
    ·在三层交换机上配置的VLAN接口为虚接口
    ·使用SVI(交换虚拟端口)实现VLAN间路由
  · 启用三层交换机的路由功能
    ()#ip routing
  · 配置虚接口的IP
    ()#interface vlan $id
    ()#ip address $ip $netmask
    ()#no shutdown
  · 配置路由接口
    ()#no switchport
  · 在三层交换机上配置Trunk并指定接口封装为802.1Q
    ()#interface f0/24
    ()#switchport trunk encapsulation dot1q
    ()#switchport mode trunk

8.动态路由
  · 动态路由
    -基于某种路由协议实现
  · 动态路由的特点
    -减少了管理任务
    -占用了网络带宽
  ·OSPF
    -邻居列表
    -链路状态数据库
    -路由表
    ·OSPF区域
      -为了适应大型网络,OSPF在网络内部划分多个区域
      -每个OSPF路由器只维护所在区域的完整链路状态信息
    ·区域ID
      -区域ID可以表示成一个IP或十进制数字
    ·配置OSPF
      启动OSPF路由进程
      ()#router ospf $id
      指定OSPF协议运行的网络地址和所在区域
      ()#network $ip 反掩码 area $areaId
      重启OSPF
      #clear ip ospf process
